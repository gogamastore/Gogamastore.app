  useEffect(() => {
    if (user) {
      fetchUserProfile();
      fetchActiveOrdersCount();
    }
  }, [user]);

  const fetchActiveOrdersCount = async () => {
    if (!user) return;
    
    try {
      console.log('📊 Fetching active orders count for user:', user.uid);
      const orders = await orderService.getUserOrders(user.uid);
      
      // Count orders that are not completed/delivered
      const activeOrders = orders.filter(order => {
        const normalizedStatus = order.status ? order.status.toLowerCase() : '';
        return normalizedStatus !== 'completed' && 
               normalizedStatus !== 'delivered' && 
               normalizedStatus !== 'cancelled';
      });
      
      console.log('📈 Active orders count:', activeOrders.length);
      setActiveOrdersCount(activeOrders.length);
    } catch (error) {
      console.error('❌ Error fetching active orders count:', error);
      setActiveOrdersCount(0);
    }
  };
